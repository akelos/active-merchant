WARNING!
---------
USE ONLY ON FRESH AKELOS INSTALLATIONS AS IT MIGHT OVERRIDE YOUR EXISTING FILES!!!


ActiveMerchant Plugin
===================================

The ActiveMerchant plugin will allow you to easily interface with payment processors through a common interface

It is a port of Ruby's Active Merchant component (http://www.activemerchant.org/)

Installation
--------------------------------

akelos your_project
cd your_project
./script/configure -i
./script/plugin install /local/path/to/active_merchant
cd app/vendor/plugins/active_merchant/

# to run all the tests of the plugin
php tests/active_merchant.php 

# to run only a specific test
php tests/lib/notification.php 

Usage
--------------------------------
<?php
// Send requests to the gateway's test servers
ActiveMerchantBase.setMode('test');

// Create a new credit card object
$credit_card = new ActiveMerchantCreditCard(
    array(
        'number'     => '4111111111111111',
        'month'      => '8',
        'year'       => '2009',
        'first_name' => 'Tobias',
        'last_name'  => 'Luetke',
        'verification_value'  => '123' 
    )
);

if($credit_card->isValid()) {

    // Create a gateway object to the TrustCommerce service
    $gateway = new ActiveMerchantTrustCommerceGateway(
        array(
            'login'    => 'TestMerchant',
            'password' => 'password'
        )
    );

    // Authorize for $10 dollars (1000 cents) 
    $response = $gateway->authorize(1000, $credit_card);

    if($response->isSuccess()) {
        // Capture the money
        $gateway->capture(1000, $response->getAuthorization());
    } else {
        throw new Exception($response->getMessage);
    }
}
